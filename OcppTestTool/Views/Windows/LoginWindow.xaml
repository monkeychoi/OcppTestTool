<ui:FluentWindow x:Class="OcppTestTool.Views.Windows.LoginWindow"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
                 xmlns:helpers="clr-namespace:OcppTestTool.Helpers"
                 Title="로그인"
                 WindowStartupLocation="CenterScreen"
                 ResizeMode="NoResize"
                 Width="380"
                 Height="380">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- 커스텀 타이틀바: 여기서 우상단 버튼 제어 -->
        <ui:TitleBar Grid.Row="0"
                     Title="로그인"
                     ShowMinimize="True"
                     ShowMaximize="False"
                     ShowClose="True" />
        
        <Grid Grid.Row="1" 
              Margin="24,15,24,20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <TextBlock Text="OCPP Test Tool 로그인"
                       FontSize="20"
                       FontWeight="SemiBold" />

            <!-- 오류 메시지 -->
            <TextBlock Grid.Row="1"
                       Margin="0,15,0,8"
                       Foreground="Tomato"
                       Visibility="{Binding ViewModel.ErrorMessage, Converter={StaticResource StringToVisibility}}"
                       Text="{Binding ViewModel.ErrorMessage}" />

            <StackPanel Grid.Row="2"
                        Orientation="Vertical"
                        Margin="6,10,6,6">
                <TextBlock Text="아이디" />
                <ui:TextBox x:Name="UserId"
                         Text="{Binding ViewModel.UserId, UpdateSourceTrigger=PropertyChanged}" />
            </StackPanel>

            <StackPanel Grid.Row="3"
                        Orientation="Vertical"
                        Margin="6">
                <TextBlock Text="비밀번호" />
                <ui:PasswordBox x:Name="UserPassword"
                                helpers:PasswordBoxAssistant.BindPassword="True"
                                helpers:PasswordBoxAssistant.BoundPassword="{Binding ViewModel.UserPassword, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
            </StackPanel>

            <StackPanel Grid.Row="5"
                        Orientation="Horizontal"
                        HorizontalAlignment="Center"
                        Margin="8,15,8,8">
                <ui:Button Content="취소"
                           Appearance="Dark"
                           Command="{Binding ViewModel.CancelCommand}" />
                <ui:Button Content="로그인"
                           Margin="5,0,0,0"
                           Appearance="Primary"
                           IsEnabled="{Binding ViewModel.IsBusy, Converter={StaticResource InverseBool}}"
                           Command="{Binding ViewModel.LoginCommand}" />
            </StackPanel>
        </Grid>
    </Grid>
</ui:FluentWindow>